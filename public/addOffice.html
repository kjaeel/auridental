<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Auri Dental Lab | Dashboard</title>
 
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="css/bootstrap.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="css/font-awesome.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="css/ionicons.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="css/AdminLTE.css">
  <link rel="stylesheet" href="css/custom.css">
 
  <link rel="stylesheet" href="css/_all-skins.css">

    
  
  
</head>
<script type="text/javascript">
  var userInfo =  JSON.parse(sessionStorage.getItem("user"));
  var baseUrl =  sessionStorage.getItem("baseUrl");

  var user_id = null;
    if(!userInfo){
        location.replace("./index.html");
    }
    else{
      user_id = userInfo.id;   
      var userName = userInfo.userName;
      var userType = userInfo.userType;
        
      console.log("user_id :",user_id);
    }
</script>
<body class="hold-transition skin-blue sidebar-mini"  scroll="no">
<div class="wrapper">

  <header class="main-header">
    <!-- Logo -->
    <a href="home.html" class="logo">
      <!-- mini logo for sidebar mini 50x50 pixels -->
      <img src="img/user2-160x160.jpg" class="img-circle" alt="User Image" style="width: 30%;">      <!-- logo for regular state and mobile devices -->
      <span class="logo-lg"><b>Admin</b>LTE</span>
    </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top">
      <!-- Sidebar toggle button-->
      <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
        <span class="sr-only">Toggle navigation</span>
      </a>

      <div class="navbar-custom-menu">
        <ul class="nav navbar-nav">
          <!-- Messages: style can be found in dropdown.less-->
         
          <!-- User Account: style can be found in dropdown.less -->
          <li class="dropdown user user-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <img src="img/user2-160x160.jpg" class="user-image" alt="User Image">
              <span class="hidden-xs" id = "username"></span>
              <script type="text/javascript">document.getElementById("username").innerHTML = userName;</script>
            </a>
            <ul class="dropdown-menu">
              <!-- User image -->
              <li class="user-header">
                <img src="img/user2-160x160.jpg" class="img-circle" alt="User Image">

                <p id = "OfficeName">
                  Kerney - Office
                 <div id = "location"><small>Kerney Office</small></div>
                  
                </p>
               <script type="text/javascript">document.getElementById("OfficeName").innerHTML = userName;
                document.getElementById("location").innerHTML = userInfo.address;</script>
              </li>
              <!-- Menu Body -->
          
              <!-- Menu Footer-->
              <li class="user-footer">
               
                <div class="pull-right">
                  <a class="btn btn-default btn-flat" id = "logout" onclick="return logout()"> Sign out</a>
                </div>
              </li>
            </ul>
          </li>
          <!-- Control Sidebar Toggle Button 
          <li>
            <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
          </li> -->
        </ul>
      </div>
    </nav>
  </header>
  <!-- Left side column. contains the logo and sidebar -->
  <aside class="main-sidebar">
    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar">
      <!-- Sidebar user panel -->
      <div class="user-panel">
        <div class="pull-left image">
         <!-- <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image"> IMAGE CIRCLE -->
        </div>
       
      </div>
      
      <!-- sidebar menu: : style can be found in sidebar.less -->
         <ul class="sidebar-menu" data-widget="tree">
        
        <li class=" treeview"></li>
        <li><a href="home.html" class="btn btn-lg  " ><i class="fa fa-home"></i> <span>Home</span></a></li>

         <li id = "incomingTab"><a href="incoming.html" class="btn btn-lg" ><i class="fa fa-suitcase"></i> <span>Incoming Case</span></a></li>
         <script type="text/javascript">
           if(userType !=  "admin"){
              document.getElementById("incomingTab").style.display = 'none';
           }
         </script>
         <li><a href="history.html" class="btn btn-lg " ><i class="fa fa-database"></i> <span>Historic Data</span></a></li>
          <li id="addOffice"><a href="addOffice.html" class="btn btn-lg btn-primary" ><i class="fa fa-plus-square"></i> <span>Add Office</span></a></li>
           <script type="text/javascript">
           if(userType !=  "admin"){
              document.getElementById("addOffice").style.display = 'none';
           }
         </script>
          <li><a href="delivered.html" class="btn btn-lg " ><i class="fa fa-briefcase"></i> <span>Delivered Cases</span></a></li> 
   </ul>
   
    </section>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
  

   
       <form id = "postOffice" name="addOffice" style="
    width: 70%;
    padding-left: 20%;
    padding-top: 5%;">
          <label for="fname">Office Name</label>
         <input type="text" name="" id="office">

            <label for="pname">User Name</label>
          <input type="text" id="user" name="patient" placeholder=""> <br>

          <label for="lname">Password</label>
          <input type="text" id="opass" name="toothnumber" placeholder="">
          
          <label for="dname">Address</label>
          <input type="text" id="add" name="docname" placeholder="">

        
           
           <input type="submit" value="SEND POST">
            <div id = "out"></div>
          </form>

    

		
    
  </div>
  <!-- /.content-wrapper -->
  <footer class="main-footer">
  
    <strong>Copyright &copy; 2018 </strong> All rights reserved.
  </footer>

  <!-- Control Sidebar -->
 
  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->
<!-- jQuery 3 -->
<script src="js/jquery.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="js/jquery-ui.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  $.widget.bridge('uibutton', $.ui.button);
</script>
<!-- Bootstrap 3.3.7 -->
<script src="js/bootstrap.js"></script>

<!-- Bootstrap WYSIHTML5 -->
<script src="js/bootstrap3-wysihtml5.all.js"></script>
<!-- Slimscroll -->

<!-- AdminLTE App -->
<script src="js/adminlte.js"></script>
<script src = "js/logout.js"></script>

<script> //API CALL

document.getElementById('postOffice').addEventListener('submit', postOffice);

  function postOffice(event){
            event.preventDefault();
              let office = document.getElementById('office').value;
                let userName = document.getElementById('user').value;
                let password = document.getElementById('opass').value;
                let address = document.getElementById('add').value;
                
          console.log(office)
          console.log(userName)
          console.log(password)
          console.log("address-------------------> ",address)
          debugger; 
              var reqObj ={
                          "officeName": office,      
                          "password" : password,
                          "address" :address,
                          "userName": userName
                          }
        
            fetch(baseUrl+'office/register', {
                method: 'POST',
                //headers : new Headers(),
                headers : {
                "Content-Type": "application/json; charset=utf-8"
                 // "Authorization": "5asvhff4jgjkjrbd1hjj5hkjhkkghk87gdsgbshb5hsh/gg4sa5gaga4fafafa4g5jngh5j4fgjfhj54fgj54fg5j",
            },
             body:JSON.stringify(reqObj)
            }).then((res) => res.json())
            .then((data) => {
              console.log(data)
        if(data.code == 999){
                alert(data.errorMessage)  
              }else{
                alert(data.displayMessage);
              }                
            })
            .catch((err)=>{console.log(err.errorMessage);
              alert(err.errorMessage)
            })
}
</script>

</body>
</html>
